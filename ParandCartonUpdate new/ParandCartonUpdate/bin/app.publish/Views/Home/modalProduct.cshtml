<button type="button" class="btn btn-outline-dark mt-4" data-bs-toggle="modal"
        data-bs-target="#ProductModal" onclick="BindProduct()">
    نمایش محصول
</button>


<!-- Modal -->
<div class="modal fade" id="ProductModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="ProdctLabel">محصولات</h1>
                </div>
                <div class="modal-body">

                    <div id="divTableProduct">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="table-responsive table-responsive-md " style="font-size: 12px !important">
                                    <table id="ProductTable" class="table table-striped table-bordered" width="100%">
                                        <thead class="text-center">
                                            <tr>
                                                <th class="text-center">ردیف</th>
                                                <th class="text-center">کد محصول</th>
                                                <th class="text-center">نام محصول</th>
                                                <th class="text-center"></th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix text-black"></div>
                        <br />
                        <button type="button" id="btnShowProductDiv" class="btn btn-primary" onclick="ShowDivAddProduct()">افزودن محصول</button>
                    </div>

                    <div style="visibility: hidden" id="divInsertProduct">
                        <h1>hi .....</h1>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">بستن</button>
                </div>
            </div>
        </div>
    </div>
<script type="text/javascript">
    function BindProduct() {
        $('#ProductTable').DataTable({
            'scrollY': '300px',
            'ordering': false,
            'scrollCollapse': true,
            'paging': false,
            'searching': false,
            'info': false,
            'lengthChange': false,
            'destroy': true,
            'ajax': {
                type: "POST",
                url: '@Url.Action("BindProduct","Home")',
                data: {},
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                columns: [
                    { "data": "ردیف" },
                    { "data": "کد محصول" },
                    { "data": "نام محصول" }
                ],
                success: function (data) {
                    $("#ProductTable tbody").find('tr').remove();
                    if (data.length > 0) {
                        for (var i = 0; i < data.length; i++) {
                            var a = i + 1;
                            $("#ProductTable tbody")
                                .append("<tr><td class='text-center'>" +
                                    a +
                                    "</td><td class='text-center'>" +
                                    data[i][1] +
                                    "</td><td class='text-center'>" +
                                    data[i][2] +
                                    "</td><td class='text-center'>" +
                                    "<ul class='nav navbar - nav' style='margin - right: 5 %;' >" +
                                    "<li><a href=# data-placement='top' data-toggle='tooltip' title='انتخاب' onclick='SelectProduct(" + data[i][0] + ");' data-bs-dismiss='modal'>" +
                                    "انتخاب</a></li>" +
                                    "</ul>" +
                                    "</td> </tr > "

                                );
                        }
                    }
                },
                error: function (result) {
                }
            }

        });

    }
    function SelectProduct(id) {
        $.ajax({
            type: "POST",
            url: '@Url.Action("SelectProduct","Home")',
            data: '{id:"' + id + '"}',
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data !== '') {
                    var key = data;
                    $(key).each(function () {

                        $('#txtProductCode').val(data[0]);
                        $('#txtProductName').val(data[1]);

                    });
                }
            },
            error: function (response) {
                alert(response.d);
            }
        });
    }
</script>
